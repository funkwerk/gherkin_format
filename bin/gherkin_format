#!/usr/bin/env ruby
require 'gherkin_format'
require 'optparse'

options = {}
OptionParser.new do |opts|
  opts.banner = 'Usage: gherkin_format [files]'
  opts.on('-v', '--[no-]verbose', 'Run verbosely') do |verbose|
    options[:verbose] = verbose
  end
  opts.on('-r', '--[no-]replace', 'Replaces input files') do |replace|
    options[:replace] = replace
  end
  opts.on('--template [TEMPLATE]', 'Renders into template') do |template|
    options[:template] = template
  end
end.parse!

formatter = GherkinFormat.new

if options.key? :template
  formatter.render(options[:template], ARGV)

  exit 0
end

ARGV.each do |file|
  formatter.format file, options
end
